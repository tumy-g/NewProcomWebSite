var __awaiter=this&&this.__awaiter||function(e,t,n,i){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function a(e){try{s(i.next(e))}catch(t){r(t)}}function u(e){try{s(i["throw"](e))}catch(t){r(t)}}function s(e){e.done?n(e.value):o(e.value).then(a,u)}s((i=i.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(e){return function(t){return s([e,t])}}function s(a){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,o&&(r=a[0]&2?o["return"]:a[0]?o["throw"]||((r=o["return"])&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;if(o=0,r)a=[a[0]&2,r.value];switch(a[0]){case 0:case 1:r=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;o=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(r=n.trys,r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){n.label=a[1];break}if(a[0]===6&&n.label<r[1]){n.label=r[1];r=a;break}if(r&&n.label<r[2]){n.label=r[2];n.ops.push(a);break}if(r[2])n.ops.pop();n.trys.pop();continue}a=t.call(e,n)}catch(u){a=[6,u];o=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};System.register(["./p-38e49dbf.system.js","@aws-amplify/core","./p-74bf56f1.system.js","@aws-amplify/auth","./p-274b6c70.system.js","./p-edf8f59e.system.js","./p-ad52443e.system.js"],(function(e){"use strict";var t,n,i,o,r,a,u,s,c,f;return{setters:[function(e){t=e.r;n=e.h},function(e){i=e.ConsoleLogger;o=e.I18n},function(e){r=e.A},function(e){a=e.Auth},function(e){u=e.T},function(e){s=e.N;c=e.h},function(e){f=e.d}],execute:function(){var l=new i("amplify-amazon-button");var h=e("amplify_amazon_button",function(){function e(e){var n=this;t(this,e);this.handleAuthStateChange=f;this.federatedSignIn=function(e){var t=e.access_token,i=e.expires_in;if(!t){return}if(!a||typeof a.federatedSignIn!=="function"||typeof a.currentAuthenticatedUser!=="function"){throw new Error(s)}var o=new Date;var u=i*1e3+o.getTime();window["amazon"].Login.retrieveProfile((function(e){return __awaiter(n,void 0,void 0,(function(){var n,i;return __generator(this,(function(o){switch(o.label){case 0:if(!e.success){return[2,l.debug("Get user Info failed")]}n={name:e.profile.Name,email:e.profile.PrimaryEmail};return[4,a.federatedSignIn("amazon",{token:t,expires_at:u},n)];case 1:o.sent();return[4,a.currentAuthenticatedUser()];case 2:i=o.sent();this.handleAuthStateChange(r.SignedIn,i);return[2]}}))}))}))}}e.prototype.componentWillLoad=function(){console.warn("Version `1.x` of Amplify UI has been deprecated and will be removed in a future major version of `aws-amplify`. Please visit https://ui.docs.amplify.aws/ for the current version of Amplify UI.")};e.prototype.signInWithAmazon=function(e){var t=this;e.preventDefault();window["amazon"].Login.setClientId(this.clientId);window["amazon"].Login.authorize({scope:"profile"},(function(e){if(e.error){return l.debug("Failed to login with amazon: "+e.error)}try{window.localStorage.setItem(c,JSON.stringify({provider:"amazon"}))}catch(n){l.debug("Failed to cache auth source into localStorage",n)}t.federatedSignIn(e)}))};e.prototype.render=function(){var e=this;return n("amplify-sign-in-button",{onClick:function(t){return e.signInWithAmazon(t)},provider:"amazon"},n("script",{src:"https://assets.loginwithamazon.com/sdk/na/login1.js"}),o.get(u.SIGN_IN_WITH_AMAZON))};return e}());var d=new i("amplify-auth0-button");var p=e("amplify_auth0_button",function(){function e(e){var n=this;t(this,e);this.handleAuthStateChange=f;this.handleLoad=function(){var e=a.configure().oauth,t=e===void 0?{}:e;var i=n.config,o=i===void 0?t.auth0:i;if(!o){d.debug("Auth0 is not configured");return}d.debug("auth0 configuration",o);if(!n._auth0){n._auth0=new window["auth0"].WebAuth(o)}n._auth0.parseHash((function(e,t){if(e){d.debug("Failed to parse the url for Auth0",e);return}if(!t){d.debug("Auth0 found no authResult in hash");return}var i={provider:"auth0",opts:{returnTo:o.returnTo,clientID:o.clientID,federated:o.federated}};try{localStorage.setItem(c,JSON.stringify(i))}catch(u){d.debug("Failed to cache auth source into localStorage",u)}n._auth0.client.userInfo(t.accessToken,(function(e,i){return __awaiter(n,void 0,void 0,(function(){var n,u,s;return __generator(this,(function(c){switch(c.label){case 0:n=undefined;u=undefined;if(e){d.debug("Failed to get the user info",e)}else{n=i.name;u=i.email}return[4,a.federatedSignIn(o.domain,{token:t.idToken,expires_at:t.expiresIn*1e3+(new Date).getTime()},{name:n,email:u})];case 1:c.sent();return[4,a.currentAuthenticatedUser()];case 2:s=c.sent();this.handleAuthStateChange(r.SignedIn,s);return[2]}}))}))}))}))}}e.prototype.componentWillLoad=function(){console.warn("Version `1.x` of Amplify UI has been deprecated and will be removed in a future major version of `aws-amplify`. Please visit https://ui.docs.amplify.aws/ for the current version of Amplify UI.")};e.prototype.signInWithAuth0=function(e){e.preventDefault();if(!this._auth0){throw new Error("the auth0 client is not configured")}this._auth0.authorize()};e.prototype.render=function(){var e=this;return n("amplify-sign-in-button",{onClick:function(t){return e.signInWithAuth0(t)},provider:"auth0"},n("script",{onLoad:this.handleLoad,src:"https://cdn.auth0.com/js/auth0/9.11/auth0.min.js"}),o.get(u.SIGN_IN_WITH_AUTH0))};return e}());var g=new i("amplify-facebook-button");var m=e("amplify_facebook_button",function(){function e(e){var n=this;t(this,e);this.handleAuthStateChange=f;this.federatedSignIn=function(e){var t=e.accessToken,i=e.expiresIn;if(!t){return}if(!a||typeof a.federatedSignIn!=="function"||typeof a.currentAuthenticatedUser!=="function"){throw new Error(s)}var o=new Date;var u=i*1e3+o.getTime();var c="name,email";window["FB"].api("/me",{fields:c},(function(e){return __awaiter(n,void 0,void 0,(function(){var n,i;return __generator(this,(function(o){switch(o.label){case 0:n={name:e.name,email:e.email};return[4,a.federatedSignIn("facebook",{token:t,expires_at:u},n)];case 1:o.sent();return[4,a.currentAuthenticatedUser()];case 2:i=o.sent();this.handleAuthStateChange(r.SignedIn,i);return[2]}}))}))}))};this.getLoginStatus=function(){window["FB"].getLoginStatus((function(e){try{window.localStorage.setItem(c,JSON.stringify({provider:"facebook"}))}catch(t){g.debug("Failed to cache auth source into localStorage",t)}if(e.status==="connected"){return n.federatedSignIn(e.authResponse)}n.login()}))};this.login=function(){var e="public_profile,email";window["FB"].login((function(e){if(e&&e.authResponse){n.federatedSignIn(e.authResponse)}}),{scope:e})}}e.prototype.componentWillLoad=function(){console.warn("Version `1.x` of Amplify UI has been deprecated and will be removed in a future major version of `aws-amplify`. Please visit https://ui.docs.amplify.aws/ for the current version of Amplify UI.")};e.prototype.signInWithFacebook=function(e){e.preventDefault();window["FB"].init({appId:this.appId,cookie:true,xfbml:false,version:"v5.0"});this.getLoginStatus()};e.prototype.render=function(){var e=this;return n("amplify-sign-in-button",{onClick:function(t){return e.signInWithFacebook(t)},provider:"facebook"},n("script",{async:true,defer:true,src:"https://connect.facebook.net/en_US/sdk.js"}),o.get(u.SIGN_IN_WITH_FACEBOOK))};return e}());var w=new i("amplify-google-button");var v=e("amplify_google_button",function(){function e(e){var n=this;t(this,e);this.handleAuthStateChange=f;this.handleError=function(e){console.error(e)};this.handleLoad=function(){window["gapi"].load("auth2")};this.handleUser=function(e){return __awaiter(n,void 0,void 0,(function(){var t,n,i,o,u;return __generator(this,(function(f){switch(f.label){case 0:if(!a||typeof a.federatedSignIn!=="function"||typeof a.currentAuthenticatedUser!=="function"){throw new Error(s)}try{window.localStorage.setItem(c,JSON.stringify({provider:"google"}))}catch(l){w.debug("Failed to cache auth source into localStorage",l)}t=e.getAuthResponse(),n=t.id_token,i=t.expires_at;o=e.getBasicProfile();return[4,a.federatedSignIn("google",{token:n,expires_at:i},{email:o.getEmail(),name:o.getName(),picture:o.getImageUrl()})];case 1:f.sent();return[4,a.currentAuthenticatedUser()];case 2:u=f.sent();try{this.handleAuthStateChange(r.SignedIn,u)}catch(h){this.handleError(h)}return[2]}}))}))}}e.prototype.componentWillLoad=function(){console.warn("Version `1.x` of Amplify UI has been deprecated and will be removed in a future major version of `aws-amplify`. Please visit https://ui.docs.amplify.aws/ for the current version of Amplify UI.")};e.prototype.getAuthInstance=function(){if(window["gapi"]&&window["gapi"].auth2){return window["gapi"].auth2.getAuthInstance()||window["gapi"].auth2.init({client_id:this.clientId,cookiepolicy:"single_host_origin",scope:"profile email openid"})}return null};e.prototype.signInWithGoogle=function(e){e.preventDefault();this.getAuthInstance().signIn().then(this.handleUser).catch(this.handleError)};e.prototype.render=function(){var e=this;return n("amplify-sign-in-button",{onClick:function(t){return e.signInWithGoogle(t)},provider:"google"},n("script",{onLoad:this.handleLoad,src:"https://apis.google.com/js/api:client.js"}),o.get(u.SIGN_IN_WITH_GOOGLE))};return e}());var y=e("amplify_oauth_button",function(){function e(e){t(this,e);this.config={}}e.prototype.signInWithOAuth=function(e){e.preventDefault();a.federatedSignIn()};e.prototype.componentWillLoad=function(){console.warn("Version `1.x` of Amplify UI has been deprecated and will be removed in a future major version of `aws-amplify`. Please visit https://ui.docs.amplify.aws/ for the current version of Amplify UI.")};e.prototype.render=function(){var e=this;return n("amplify-sign-in-button",{onClick:function(t){return e.signInWithOAuth(t)},provider:"oauth"},this.config.label||o.get(u.SIGN_IN_WITH_AWS))};return e}())}}}));